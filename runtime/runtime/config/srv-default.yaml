# Runtime service configuration

broker:
  replicas: 1
  sockets:
    journal_in:
      socket_type: sub
      address: ipc:///tmp/journal.sock
      bind: true
    journal_out:
      socket_type: pub
      address: tcp://127.0.0.1:6003
      bind: true
    datagram_recv:
      socket_type: dish
      address: udp://*:6000
      bind: true
    gamepad_status:
      socket_type: pub
      address: ipc:///tmp/gamepad-status.sock
      bind: true
    sensor_status:
      socket_type: sub
      address: ipc:///tmp/sensor-status.sock
  max_workers: 5
  proxies:
    journal:
      frontend: journal_in
      backend: journal_out

executor:
  replicas: 1
  daemon: false
  sockets:
    journal:
      socket_type: pub
      address: ipc:///tmp/journal.sock
      send_timeout: 5
    command:
      socket_type: rep
      address: tcp://127.0.0.1:6002
      bind: true
    device_status:
      socket_type: sub
      address:
        - ipc:///tmp/sensor-status.sock
        - ipc:///tmp/gamepad-status.sock
  student_code: runtime.game.studentcode
  device_aliases: config/device-aliases.yaml
  loop_interval: 0.05  # 20 Hz

device:
  replicas: 1
  sockets:
    journal:
      socket_type: pub
      address: ipc:///tmp/journal.sock
      send_timeout: 5
    sensor_status:
      socket_type: pub
      address: ipc:///tmp/sensor-status.sock
      bind: true
    sensor_command:
      socket_type: sub
      address: ipc:///tmp/sensor-command.sock
      bind: true
