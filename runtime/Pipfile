[[source]]
url = "https://pypi.python.org/simple"
verify_ssl = true

[requires]
python_version = "3.8"

[packages]
aiofiles = "*"
aioprocessing = "*"
aioserial = "*"
backoff = "*"
cachetools = "*"
click = "~=7.0"
colorama = "*"
cobs = "~=1.1"
cython = "~=0.29"  # FIXME
msgpack = "*"
pyserial = "~=3.4"
pylint = "~=2.2"
python-rapidjson = "*"
pyudev = "~=0.21"
pyyaml = "~=3.13"
schema = "*"
structlog = "*"
# uvloop = "*"
# Note: `pyzmq` should be installed separately because it relies on several
# --install-option flags to use draft sockets.

[dev-packages]
pytest = "~=5.3"
pytest-timeout = "~=1.3"
asynctest = "~=0.12"
memory-profiler = "*"
sphinx = "*"
sphinx-rtd-theme = "*"
autopep8 = "*"
sphinx-autobuild = "*"
pytest-asyncio = "*"
pytest-cov = "*"
pytest-mock = "*"
yappi = "*"

[scripts]
build = "python setup.py build_ext --inplace"
clean = "find runtime ( -name '*.cpython-*.so' -o -name '*.c' -o -name '*.cpp' ) -delete"
dev = "python -m runtime run --log-level DEBUG --log-pretty"
prod = "python -m runtime run"
# FIXME: remove build and dist
lint = "pylint --exit-zero runtime/game/studentapi.py runtime/messaging/connection.py runtime/service runtime/util"
test = "sh -c 'python -m pytest tests/test_*.py'"
format = "autopep8 --recursive --aggressive --max-line-length 100 --in-place runtime"
